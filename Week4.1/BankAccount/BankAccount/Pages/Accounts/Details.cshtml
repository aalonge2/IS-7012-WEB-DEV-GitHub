@page
@model DetailsModel
@{
    ViewData["Title"] = "Account Details";
}

@if (Model.Account == null)
{
    <h2 class="text-danger">Account not found.</h2>
}
else
{
    <h1>Account Details</h1>

    <dl class="row">
        <dt class="col-sm-3">Account Number</dt>
        <dd class="col-sm-9">@Model.Account.AccountNumber</dd>

        <dt class="col-sm-3">Full Name</dt>
        <dd class="col-sm-9">@Model.Account.FullName</dd>

        <dt class="col-sm-3">Email</dt>
        <dd class="col-sm-9">@Model.Account.Email</dd>

        <dt class="col-sm-3">Account Type</dt>
        <dd class="col-sm-9">@Model.Account.AccountType</dd>

        <dt class="col-sm-3">Date Created</dt>
        <dd class="col-sm-9">@Model.Account.DateCreated.ToString("yyyy-MM-dd")</dd>

        <dt class="col-sm-3">Balance</dt>
        <dd class="col-sm-9">@string.Format("{0:C}", Model.Account.Balance)</dd>
    </dl>

    <h3 class="mt-4">Transactions</h3>
    <table class="table table-sm">
        <thead>
            <tr>
                <th>Date</th>
                <th>Amount</th>
                <th>Note</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.Account.Transactions.Any())
            {
                // lambda: order transactions newest first
                foreach (var t in Model.Account.Transactions.OrderByDescending(t => t.Date))
                {
                    <tr>
                        <td>@t.Date.ToLocalTime().ToString("MM/dd/yyyy h:mm tt")</td>
                        <td>@string.Format("{0:C}", t.Amount)</td>
                        <td>@t.Note</td>
                    </tr>
                }
            }
            else
            {
                <tr><td colspan="3" class="text-muted">No transactions yet.</td></tr>
            }
        </tbody>
    </table>

    <p>
        <a class="btn btn-secondary" href="/Accounts/Edit?id=@Model.Account.Id">Edit</a>
        <a class="btn btn-danger" href="/Accounts/Delete?id=@Model.Account.Id">Delete</a>
        <a class="btn btn-link" href="/">Back to list</a>
    </p>
}
